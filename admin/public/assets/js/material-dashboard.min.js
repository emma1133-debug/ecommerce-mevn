"use strict";
!function(){
  var e,t;
  -1<navigator.platform.indexOf("Win") && (
    document.getElementsByClassName("main-content")[0] && 
    (e=document.querySelector(".main-content"), new PerfectScrollbar(e)),
    document.getElementsByClassName("sidenav")[0] && 
    (e=document.querySelector(".sidenav"), new PerfectScrollbar(e)),
    document.getElementsByClassName("navbar-collapse")[0] && 
    (t=document.querySelector(".navbar:not(.navbar-expand-lg) .navbar-collapse"), new PerfectScrollbar(t)),
    document.getElementsByClassName("fixed-plugin")[0] && 
    (t=document.querySelector(".fixed-plugin"), new PerfectScrollbar(t))
  )
}(),
document.getElementById("navbarBlur") && navbarBlurOnScroll("navbarBlur");

function navbarColorOnResize() {
  const referenceButtons = document.querySelector("[data-class].active");
  const sidenav = document.getElementById("sidenav-main");

  // ✅ FIXED: tránh lỗi null khi không có nút đang active
  if (!referenceButtons || !sidenav) return;

  if (window.innerWidth > 1200) {
    if (
      referenceButtons.classList.contains("active") &&
      referenceButtons.getAttribute("data-class") === "bg-transparent"
    ) {
      sidenav.classList.remove("bg-white");
    } else {
      sidenav.classList.add("bg-white");
    }
  } else {
    sidenav.classList.add("bg-white");
    sidenav.classList.remove("bg-transparent");
  }
}

// Gắn lại sự kiện resize
window.addEventListener("resize", navbarColorOnResize);
window.addEventListener("load", navbarColorOnResize);
